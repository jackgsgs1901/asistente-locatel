<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Asistente LOCATEL</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f6f6f6;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h1 {
      color: #007E5A;
      text-align: center;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input, select, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button {
      background-color: #007E5A;
      color: white;
      font-weight: bold;
      margin-top: 25px;
      cursor: pointer;
    }
    button:hover {
      background-color: #005f43;
    }
    #resultado {
      margin-top: 30px;
      background: #fff;
      border-left: 4px solid #007E5A;
      padding: 20px;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <h1>Asistente de Vitaminas LOCATEL</h1>

  <form id="vitamin-form">
    <label for="nombre">¿Cuál es tu nombre?</label>
    <input type="text" id="nombre" required>

    <label for="edad">¿Cuál es tu edad?</label>
    <input type="number" id="edad" required>

    <label for="sexo">¿Cuál es tu sexo?</label>
    <select id="sexo" required>
      <option value="">Selecciona</option>
      <option value="Masculino">Masculino</option>
      <option value="Femenino">Femenino</option>
    </select>

    <label for="alergias">¿Tienes alguna alergia?</label>
    <textarea id="alergias" placeholder="Ej: Penicilina, lactosa..."></textarea>

    <label for="pastillas">¿Estás tomando alguna pastilla actualmente?</label>
    <textarea id="pastillas" placeholder="Ej: Paracetamol, ibuprofeno..."></textarea>

    <button type="submit">Obtener recomendación</button>
  </form>

  <div id="resultado" style="display:none;"></div>

  <script>
    const form = document.getElementById('vitamin-form');
    const resultado = document.getElementById('resultado');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      resultado.style.display = 'none';
      resultado.innerHTML = "Cargando recomendación...";

      const datos = {
        nombre: document.getElementById('nombre').value,
        edad: document.getElementById('edad').value,
        sexo: document.getElementById('sexo').value,
        alergias: document.getElementById('alergias').value,
        pastillas: document.getElementById('pastillas').value
      };

      const prompt = `
Eres un experto en salud de LOCATEL. Basado en la siguiente información del cliente, recomienda una vitamina ideal. 
No menciones que eres un modelo de lenguaje, responde directamente con una recomendación amable y clara.

Nombre: ${datos.nombre}
Edad: ${datos.edad}
Sexo: ${datos.sexo}
Alergias: ${datos.alergias || "Ninguna"}
Pastillas que toma: ${datos.pastillas || "Ninguna"}

Recomendación:
`;

      try {
        const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "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"  // ← REEMPLAZA ESTO
          },
          body: JSON.stringify({
            model: "llama3-70b-8192",
            messages: [
              { role: "system", content: "Eres un asistente experto en vitaminas para clientes de LOCATEL." },
              { role: "user", content: prompt }
            ],
            temperature: 0.7
          })
        });

        const data = await response.json();
        const texto = data.choices?.[0]?.message?.content || "No se pudo generar una recomendación.";

        resultado.innerHTML = `<strong>Resultado:</strong><br><br>${texto}`;
        resultado.style.display = 'block';

      } catch (error) {
        resultado.innerHTML = "Hubo un error al generar la recomendación.";
        resultado.style.display = 'block';
        console.error(error);
      }
    });
  </script>

</body>
</html>
